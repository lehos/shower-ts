<!DOCTYPE html>
<html lang="en">
<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/styles.css">

    <link rel="stylesheet" href="highlight/styles/default.css">
    <script src="highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <style>
        .slide {
            padding-top: 20px;
        }
        .shower {
            --slide-ratio: calc(16 / 9);
        }

        code {
            font-size: 13px;
        }

        .slide h2 {
            margin-bottom: 10px;
        }

        .slide pre {
            margin-bottom: 0;
        }

        .mistype {
            background-image: url(pictures/error.svg);
            background-repeat: repeat-x;
            background-position: 0 100%;
            background-size: auto 0.15em;
        }
    </style>
</head>
<body class="shower list">

    <header class="caption">
        <h1>Как нам помогает TypeScript</h1>
        <p>Стратан Алексей, Кометрика</p>
    </header>

    <section class="slide" id="main">
        <h2>Как нам помогает TypeScript</h2>

        <style>
            #main h2 {
                font-size: 60px;
                text-align: center;
                line-height: 50vh;
            }
        </style>
    </section>

    <section class="slide">
        <h2>Общее</h2>
        <ul>
            <li>TS - язык, суперсет над JS, система типов и компилятор</li>
            <li class="next">Open-source, Разрабатывается Microsoft</li>
            <li class="next">TypeScript, VS Code, Slack, Angular2+, Vue3, Ant.design</li>
            <li class="next">Отдельная типизация - @types и .d.ts</li>
            <li class="next">Некоторые редакторы используют TS тайпинги для IntelliSense</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Интерфейс (тип) и простой рефакторинг</h2>
        <div>Было</div>
        <pre>
            <code>
function greet(user) {
  console.log(user.name)
}
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>Интерфейс (тип) и простой рефакторинг</h2>
        <div>Структура юзера изменилась (name -> firstName)</div>

        <pre>
            <code>
function greet(user) {
  console.log(user.name) <span class="comment">Упадет!</span>
}
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>Интерфейс (тип) и простой рефакторинг</h2>

        <div>Добавим TS</div>

        <pre>
            <code>
interface User {
  id: string
  firstName: string
  lastName: string
}
function greet(user: User) {
  console.log(user.<span class="mistype">name</span>) <span class="comment">// TS предупреждает</span>
  user.| <span class="comment">// автокомплит!</span>
}
function <span class="mistype">greet</span>('wrong type param') <span class="comment">// ошибка</span>
            </code>
        </pre>
    </section>


    <section class="slide">
        <h2>То же самое в реакт компонентах</h2>

        <pre>
            <code>
type Props = {
  onChange: (event) => void
  value: string
}
&nbsp;
function Input(props: Props) {
  return &lt;StyledInput {...props} /&gt;
}
&nbsp;
&lt;Input value="" onChange={e => {console.log(e)}} />
&lt;<span class="mistype">Input</span> <span class="mistype">value</span>={1} /> <span class="comment">// ошибки</span>
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>Class based components</h2>

        <pre>
            <code>
type Props = {
  name: string
}
type State = {
  value: string
}
class FormInput extends Component&lt;Props, State> {
  onChange = (e) => { this.setState({ value: e.target.value })}
  render() {
    const {name} = this.props <span class="comment">// типизирован</span>
    const {value} = this.state <span class="comment">// типизирован</span>
    return <>
      &lt;Input value={value} onChange={onChange} />
      {value && value.split('').reverse().join()}
      {value.<span class="mistype">reverse</span>()} {<span class="comment">/* TS2339: Property 'reverse' does not exist on type 'string'. */</span>}
    &lt;/>
            </code>
        </pre>
    </section>

    <section class="slide">
        <h2>Union of strings</h2>

        <pre>
<code>
type Props = {
	onChange: (value) => void
	value: string
 	size?: 'small' | 'large'
}

function Input(props: Props) {
	return <StyledInput {...props} />
}

&lt;Input <span class="mistype">size</span>="smoll" /> {/* Ошибка */}
</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Рекомендации</h2>

        <ul>
            <li>Попробуйте, если не пробовали =)</li>
            <li class="next">Редактор с поддержкой TS (VS Code, WebStorm)</li>
            <li class="next">Strict Mode</li>
            <li class="next">Избегайте <code>any</code>, стремитесь к 100% покрытию типами</li>
            <li class="next">Typecheck в гит хуках</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Сcылки</h2>


    </section>

    <div class="progress"></div>

    <script src="shower/shower.min.js"></script>
</body>
</html>
